<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="../css/style.css" />
</head>

<body>
    <!--Start-->
    <div id="startDiv">

        <div id="topBox">
            webapp StartScreen
        </div>

        <center>
            <div id="chooseName">
                <div id="login">
                    Gebruikersnaam:
                    <input name="GebruikersNaam" id="username" type="text" value="">
                </div>
                <br>
                <div>
                    <br>
                    <button id="chooseColor" onclick="hideButton()">choose Color</button>
                </div>
            </div>
        </center>


        <div id="colorPicker">
            <h2 id="textColor"> Pick a Color </h2>
            <div class="ColorPickBox" id="ColorBlue" onclick="changeColorBlue()"> Blue </div>
            <div class="ColorPickBox" id="ColorRed" onclick="changeColorRed()"> Red </div>
            <div class="ColorPickBox" id="ColorGreen" onclick="changeColorGreen()"> Green </div>
            <div class="ColorPickBox" id="ColorYellow" onclick="changeColorYellow()"> Yellow </div>
            <div class="ColorPickBox" id="ColorOrange" onclick="changeColorOrange()"> Orange </div>
            <div class="ColorPickBox" id="ColorPink" onclick="changeColorPink()"> Pink </div>
            <div class="ColorPickBox" id="ColorBrown" onclick="changeColorBrown()"> Brown </div>
            <div class="ColorPickBox" id="ColorGray" onclick="changeColorGray()"> Gray </div>
            <div class="ColorPickBox" id="ColorPurple" onclick="changeColorPurple()"> Purple </div>
        </div>

    </div>

    <!--Control\ingame-->
    <div id="gameDiv" style="display:none;">

        <div id="topBox">
            webapp Controls
        </div>

        <button id="inventoryScreen"> Inventory </button>
        <button id="notepadScreen"> Clues </button>

        <div class="box" id="actionCounter">
            <label for="Action points">
                <abbr title="Action points">Action points</abbr>
            </label>

            <input id="qty" class="input" value="10" disabled="true" />
        </div>

        <div id="controlsBox">

            <button id="up" onclick="modify_qty(-1)">
                <img id="controlImg" src="../content/up.png"> </button>
            <button id="down" onclick="modify_qty(-1)">
                <img id="controlImg" src="../content/down.png"> </button>
            <button id="left" onclick="modify_qty(-1)">
                <img id="controlImg" src="../content/left.png"> </button>
            <button id="right" onclick="modify_qty(-1)">
                <img id="controlImg" src="../content/right.png"> </button>
            <button id="action" onclick="modify_qty(-3)">Action</button>
            <button id="action" onclick="myAction()">Action</button>

            <button id="endTurn" onclick="turnOver()">End turn</button>



        </div>
    </div>

    <!--pop-up screen-->

    <div id="popUpBox" style="display:none;">
        <button id="oke"> oke </button>
    </div>


    <!--Inventory-->
    <div id="inventoryDiv" style="display:none;">

        <div id="topBox">
            webapp Inventory
        </div>

        <div id="middleBox">

            <button id="main"> Main </button>
            <button id="notepadScreen1"> Clues </button>

        </div>

        <div id="bottomBox">

            <div id="inventoryBox1">
                Item 1
                <button id="useItem1">use</button>
                <button id="dropItem1">drop</button>
            </div>

            <div id="inventoryBox2">
                Item 2
                <button id="useItem2">use</button>
                <button id="dropItem2">drop</button>
            </div>

            <div id="inventoryBox3">
                Item 3
                <button id="useItem3">use</button>
                <button id="dropItem3">drop</button>
            </div>

        </div>

    </div>

    <!--Clues-->

    <div id="notepadDiv" style="display:none">

        <div id="topBox">
            webapp Clues
        </div>

        <div id="middleBox">

            <button id="main1"> Main </button>
            <button id="inventoryScreen1"> Inventory </button>

        </div>

        <div id="bottomBox">

        </div>

    </div>

    </div>

    <!-- readyscherm -->

    <div id="readySchermDiv" style="display:none">

        <button id="ready" onclick="showMain()">Ready</button>

    </div>

</body>

<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>

<script src="../js/inventory.js"></script>



<script>

    function changeColorBlue() {
        document.getElementById('chooseColor').style.backgroundColor = "rgb(0,0,255)";
    }
    function changeColorRed() {
        document.getElementById('chooseColor').style.backgroundColor = "rgb(255,0,0)";
    }
    function changeColorGreen() {
        document.getElementById('chooseColor').style.backgroundColor = "#00FF00";
    }
    function changeColorYellow() {
        document.getElementById('chooseColor').style.backgroundColor = "yellow";
    }
    function changeColorOrange() {
        document.getElementById('chooseColor').style.backgroundColor = "orange";
    }
    function changeColorPink() {
        document.getElementById('chooseColor').style.backgroundColor = "pink";
    }
    function changeColorBrown() {
        document.getElementById('chooseColor').style.backgroundColor = "brown";
    }
    function changeColorGray() {
        document.getElementById('chooseColor').style.backgroundColor = "gray";
    }
    function changeColorPurple() {
        document.getElementById('chooseColor').style.backgroundColor = "Purple";
    }

    function hideButton() {
        var gameDiv = document.getElementById("gameDiv");
        var ActionC = document.getElementById("actionCounter");
        var colorP = document.getElementById("colorPicker");
        var chooseName = document.getElementById("chooseName");
        startDiv.style.display = "none";
        readySchermDiv.style.display = "inline-block";
    }

    function showMain() {
        var gameDiv = document.getElementById("gameDiv");
        var ActionC = document.getElementById("actionCounter");
        var readyButton = document.getElementById("ready");
        readySchermDiv.style.display = "none";
        gameDiv.style.display = "inline-block";
    }

    function checkField() {
        var x = document.getElementById("username").value;

        if (x === "") {
            alert("Insert name")
            return false;
        } else {
            return true;
        }
        if (x == true) {
            window.location.href = "index.html";
        }
    }

    var socket = io();
    document.getElementById("up").addEventListener("click", emitMove);
    document.getElementById("down").addEventListener("click", emitMove);
    document.getElementById("left").addEventListener("click", emitMove);
    document.getElementById("right").addEventListener("click", emitMove);
    document.getElementById("action").addEventListener("click", emitAction);
    //actions
    document.getElementById("inventoryScreen").addEventListener("click", myInventory);
    document.getElementById("inventoryScreen1").addEventListener("click", myInventory);
    document.getElementById("main").addEventListener("click", myMain);
    document.getElementById("main1").addEventListener("click", myMain1);
    document.getElementById("notepadScreen").addEventListener("click", myNotepad);
    document.getElementById("notepadScreen1").addEventListener("click", myNotepad);
    document.getElementById("oke").addEventListener("click", myOke);

    function emitMove() {
        socket.emit("move", this.id);
    }

    function emitAction() {
        socket.emit("move", this.id);
    }

    function endTurn() {
        socket.emit("turn over", this.id);
    }

    function useItem() {
        socket.emit("use item", this.id);
    }

    function dropItem() {
        socket.emit("Drop item", this.id);
    }


    /*action deplete on move*/

    function modify_qty(val) {
        var qty = document.getElementById('qty').value;
        var new_qty = parseInt(qty, 10) + val;


        if (new_qty < 3) {
            document.getElementById("action").disabled = true;
        }

        if (new_qty <= 0) {
            new_qty = 0
            document.getElementById("action").disabled = true;
            document.getElementById("up").disabled = true;
            document.getElementById("down").disabled = true;
            document.getElementById("left").disabled = true;
            document.getElementById("right").disabled = true;

        }



        document.getElementById('qty').value = new_qty;
        turnOver();
        return turnOver();
    }

    function turnOver() {
        ;
        if (new_qty === 0) {
            socket.emit("endturn", this.id)
        }
        return new_qty;

    }


    function myInventory() {
        gameDiv.style.display = 'none';
        notepadDiv.style.display = 'none';
        inventoryDiv.style.display = 'inline-block';
    }

    function myMain() {
        inventoryDiv.style.display = 'none';
        notepadDiv.style.display = 'none';
        gameDiv.style.display = 'inline-block';
    }

    function myMain1() {
        notepadDiv.style.display = 'none';
        gameDiv.style.display = 'inline-block';
    }

    function myNotepad() {
        inventoryDiv.style.display = 'none';
        gameDiv.style.display = 'none';
        notepadDiv.style.display = 'inline-block';
    }

    function myAction() {
        popUpBox.style.display = 'inline-block';
    }

    function myOke() {
        popUpBox.style.display = 'none';
    }

    function ready() {
        readySchermDiv.style.display = 'inline-block';
        socket.emit("ready", this.id);
    }

</script>

</html>